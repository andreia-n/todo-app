{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { tasksEntityInitialState } from \"./taskInitial.state\";\nimport { taskApi } from \"./tasks-api\";\nconst taskSlice = createSlice({\n  name: \"task\",\n  initialState: tasksEntityInitialState,\n  reducers: {\n    setTasks(state, action) {\n      state.tasks = action.payload;\n    },\n\n    resetTasksEnity(state) {\n      state.tasks = tasksEntityInitialState.tasks;\n    }\n\n  },\n  extraReducers: builder => {\n    builder.addMatcher(taskApi.endpoints.getTasks.matchFulfilled, //Payload action type = server returned type\n    (state, action) => {\n      state.tasks = action.payload;\n    });\n    builder.addMatcher(taskApi.endpoints.addTask.matchFulfilled, (state, action) => {\n      state.tasks.push(action.payload);\n      console.log(state.tasks);\n    });\n    builder.addMatcher(taskApi.endpoints.deleteTask.matchFulfilled, (state, action) => {\n      // const { id } = action.payload\n      // const index = state.tasks.findIndex((task) => task.id === id)\n      // const updatedTaskList = state.tasks.splice(index, 1)\n      // state.tasks = updatedTaskList\n      state.tasks = state.tasks.filter(task => task.id !== action.payload);\n      console.logstate.tasks.filter(task => task.id);\n    });\n    builder.addMatcher(taskApi.endpoints.updateTask.matchFulfilled, (state, action) => {\n      state.tasks = state.tasks.map(task => task.id === action.payload.id ? action.payload : task);\n    });\n  }\n});\nexport const {\n  setTasks,\n  resetTasksEnity\n} = taskSlice.actions;\nexport default taskSlice.reducer;","map":{"version":3,"sources":["C:/Users/annegrea/Downloads/homework tsc/homework-app/src/state/task/task.reducer.ts"],"names":["createSlice","tasksEntityInitialState","taskApi","taskSlice","name","initialState","reducers","setTasks","state","action","tasks","payload","resetTasksEnity","extraReducers","builder","addMatcher","endpoints","getTasks","matchFulfilled","addTask","push","console","log","deleteTask","filter","task","id","logstate","updateTask","map","actions","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA2C,kBAA3C;AAIA,SAASC,uBAAT,QAAwC,qBAAxC;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,MAAMC,SAAS,GAAGH,WAAW,CAAC;AAC5BI,EAAAA,IAAI,EAAE,MADsB;AAE5BC,EAAAA,YAAY,EAAEJ,uBAFc;AAG5BK,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,CAACC,KAAD,EAA8BC,MAA9B,EAA6D;AACnED,MAAAA,KAAK,CAACE,KAAN,GAAcD,MAAM,CAACE,OAArB;AACD,KAHO;;AAIRC,IAAAA,eAAe,CAACJ,KAAD,EAA8B;AAC3CA,MAAAA,KAAK,CAACE,KAAN,GAAcT,uBAAuB,CAACS,KAAtC;AACD;;AANO,GAHkB;AAW5BG,EAAAA,aAAa,EAAGC,OAAD,IAAa;AAC1BA,IAAAA,OAAO,CAACC,UAAR,CACEb,OAAO,CAACc,SAAR,CAAkBC,QAAlB,CAA2BC,cAD7B,EAEE;AACA,KAACV,KAAD,EAA8BC,MAA9B,KAAgE;AAC9DD,MAAAA,KAAK,CAACE,KAAN,GAAcD,MAAM,CAACE,OAArB;AACD,KALH;AAOAG,IAAAA,OAAO,CAACC,UAAR,CACEb,OAAO,CAACc,SAAR,CAAkBG,OAAlB,CAA0BD,cAD5B,EAEE,CAACV,KAAD,EAA8BC,MAA9B,KAA8D;AAC5DD,MAAAA,KAAK,CAACE,KAAN,CAAYU,IAAZ,CAAiBX,MAAM,CAACE,OAAxB;AACAU,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAK,CAACE,KAAlB;AACD,KALH;AAOAI,IAAAA,OAAO,CAACC,UAAR,CACEb,OAAO,CAACc,SAAR,CAAkBO,UAAlB,CAA6BL,cAD/B,EAEE,CAACV,KAAD,EAAQC,MAAR,KAA0C;AACxC;AACA;AACA;AACA;AACAD,MAAAA,KAAK,CAACE,KAAN,GAAcF,KAAK,CAACE,KAAN,CAAYc,MAAZ,CAAoBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYjB,MAAM,CAACE,OAAhD,CAAd;AACAU,MAAAA,OAAO,CAACM,QAAR,CAAiBjB,KAAjB,CAAuBc,MAAvB,CAA+BC,IAAD,IAAUA,IAAI,CAACC,EAA7C;AACD,KATH;AAWAZ,IAAAA,OAAO,CAACC,UAAR,CACEb,OAAO,CAACc,SAAR,CAAkBY,UAAlB,CAA6BV,cAD/B,EAEE,CAACV,KAAD,EAAQC,MAAR,KAAwC;AACtCD,MAAAA,KAAK,CAACE,KAAN,GAAcF,KAAK,CAACE,KAAN,CAAYmB,GAAZ,CAAiBJ,IAAD,IAC5BA,IAAI,CAACC,EAAL,KAAYjB,MAAM,CAACE,OAAP,CAAee,EAA3B,GAAgCjB,MAAM,CAACE,OAAvC,GAAiDc,IADrC,CAAd;AAGD,KANH;AAQD;AA7C2B,CAAD,CAA7B;AAgDA,OAAO,MAAM;AAAElB,EAAAA,QAAF;AAAYK,EAAAA;AAAZ,IAAgCT,SAAS,CAAC2B,OAAhD;AACP,eAAe3B,SAAS,CAAC4B,OAAzB","sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\r\n\r\nimport { Task } from \"../../common/interface/Task\"\r\nimport { TasksEntityInterface } from \"../root.interface\"\r\nimport { tasksEntityInitialState } from \"./taskInitial.state\"\r\nimport { taskApi } from \"./tasks-api\"\r\n\r\nconst taskSlice = createSlice({\r\n  name: \"task\",\r\n  initialState: tasksEntityInitialState,\r\n  reducers: {\r\n    setTasks(state: TasksEntityInterface, action: PayloadAction<Task[]>) {\r\n      state.tasks = action.payload\r\n    },\r\n    resetTasksEnity(state: TasksEntityInterface) {\r\n      state.tasks = tasksEntityInitialState.tasks\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addMatcher(\r\n      taskApi.endpoints.getTasks.matchFulfilled,\r\n      //Payload action type = server returned type\r\n      (state: TasksEntityInterface, action: PayloadAction<Task[]>) => {\r\n        state.tasks = action.payload\r\n      }\r\n    )\r\n    builder.addMatcher(\r\n      taskApi.endpoints.addTask.matchFulfilled,\r\n      (state: TasksEntityInterface, action: PayloadAction<Task>) => {\r\n        state.tasks.push(action.payload)\r\n        console.log(state.tasks)\r\n      }\r\n    )\r\n    builder.addMatcher(\r\n      taskApi.endpoints.deleteTask.matchFulfilled,\r\n      (state, action: PayloadAction<number>) => {\r\n        // const { id } = action.payload\r\n        // const index = state.tasks.findIndex((task) => task.id === id)\r\n        // const updatedTaskList = state.tasks.splice(index, 1)\r\n        // state.tasks = updatedTaskList\r\n        state.tasks = state.tasks.filter((task) => task.id !== action.payload)\r\n        console.logstate.tasks.filter((task) => task.id)\r\n      }\r\n    )\r\n    builder.addMatcher(\r\n      taskApi.endpoints.updateTask.matchFulfilled,\r\n      (state, action: PayloadAction<Task>) => {\r\n        state.tasks = state.tasks.map((task) =>\r\n          task.id === action.payload.id ? action.payload : task\r\n        )\r\n      }\r\n    )\r\n  },\r\n})\r\n\r\nexport const { setTasks, resetTasksEnity } = taskSlice.actions\r\nexport default taskSlice.reducer\r\n"]},"metadata":{},"sourceType":"module"}